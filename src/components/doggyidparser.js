const designs = ["0000077777111111111133333333333333333333777777777777777777777777700000.0000077777111111111133333333333333333333777777777777777777777777700000.0000077777111111111133333333333333333333777777777777777777777777700000.0000077777111111111133333333333333333333777777777777777777777777700000.0000077777111111111133333333333333333333777777777777777777777777700000.0000077777222221111177777777773333300000000000000000000777777777700000.0000077777222221111177777777773333300000000000000000000777777777700000.0000077777222221111177777777773333300000000000000000000777777777700000.0000077777222221111177777777773333300000000000000000000777777777700000.0000077777222221111177777777773333300000000000000000000777777777700000.0000077777222221111177777777770000033333333333333333333333333333300000.0000077777222221111177777777770000033333333333333333333333333333300000.0000077777222221111177777777770000033333333333333333333333333333300000.0000077777222221111177777777770000033333333333333333333333333333300000.0000077777222221111177777777770000033333333333333333333333333333300000.0000077777777772222277777777773333333333333333333333333333337777700000.0000077777777772222277777777773333333333333333333333333333337777700000.0000077777777772222277777777773333333333333333333333333333337777700000.0000077777777772222277777777773333333333333333333333333333337777700000.0000077777777772222277777777773333333333333333333333333333337777700000.0000077777777777777777777777773333333333333333333311111000000000000000.0000077777777777777777777777773333333333333333333311111000000000000000.0000077777777777777777777777773333333333333333333311111000000000000000.0000077777777777777777777777773333333333333333333311111000000000000000.0000077777777777777777777777773333333333333333333311111000000000000000.0000077777111117777777777777773333333333333333333311111000007777700000.0000077777111117777777777777773333333333333333333311111000007777700000.0000077777111117777777777777773333333333333333333311111000007777700000.0000077777111117777777777777773333333333333333333311111000007777700000.0000077777111117777777777777773333333333333333333311111000007777700000.0000011111111111111100000000003333333333333333333311111777777777700000.0000011111111111111100000000003333333333333333333311111777777777700000.0000011111111111111100000000003333333333333333333311111777777777700000.0000011111111111111100000000003333333333333333333311111777777777700000.0000011111111111111100000000003333333333333333333311111777777777700000.0000022222222223333333333333333333333333333333333333333000007777700000.0000022222222223333333333333333333333333333333333333333000007777700000.0000022222222223333333333333333333333333333333333333333000007777700000.0000022222222223333333333333333333333333333333333333333000007777700000.0000022222222223333333333333333333333333333333333333333000007777700000.0000077777000003333366666222222222233333333333333333333333333333300000.0000077777000003333366666222222222233333333333333333333333333333300000.0000077777000003333366666222222222233333333333333333333333333333300000.0000077777000003333366666222222222233333333333333333333333333333300000.0000077777000003333366666222222222233333333333333333333333333333300000.0000077777000003333333333222224444455555333333333333333000007777700000.0000077777000003333333333222224444455555333333333333333000007777700000.0000077777000003333333333222224444455555333333333333333000007777700000.0000077777000003333333333222224444455555333333333333333000007777700000.0000077777000003333333333222224444455555333333333333333000007777700000.0000011111000003333333333666664444455555333333333333333000000000000000.0000011111000003333333333666664444455555333333333333333000000000000000.0000011111000003333333333666664444455555333333333333333000000000000000.0000011111000003333333333666664444455555333333333333333000000000000000.0000011111000003333333333666664444455555333333333333333000000000000000.0000022222111113333366666222223333333333333333333311111777777777700000.0000022222111113333366666222223333333333333333333311111777777777700000.0000022222111113333366666222223333333333333333333311111777777777700000.0000022222111113333366666222223333333333333333333311111777777777700000.0000022222111113333366666222223333333333333333333311111777777777700000","0000000000777777777777777777772222244444333335555577777777777777777777777777777777777777777777777777777770000000000.0000000000777777777777777777772222244444333335555577777777777777777777777777777777777777777777777777777770000000000.0000000000777777777777777777772222244444333335555577777777777777777777777777777777777777777777777777777770000000000.0000000000777777777777777777772222244444333335555577777777777777777777777777777777777777777777777777777770000000000.0000000000777777777777777777772222244444333335555577777777777777777777777777777777777777777777777777777770000000000.0000000000777770000000000222226666644444333333333355555777777777777777777777777777777777777777777777777770000000000.0000000000777770000000000222226666644444333333333355555777777777777777777777777777777777777777777777777770000000000.0000000000777770000000000222226666644444333333333355555777777777777777777777777777777777777777777777777770000000000.0000000000777770000000000222226666644444333333333355555777777777777777777777777777777777777777777777777770000000000.0000000000777770000000000222226666644444333333333355555777777777777777777777777777777777777777777777777770000000000.0000000000777777777777777000003333333333333333333355555555557777777777777777777777777777777777777777777770000000000.0000000000777777777777777000003333333333333333333355555555557777777777777777777777777777777777777777777770000000000.0000000000777777777777777000003333333333333333333355555555557777777777777777777777777777777777777777777770000000000.0000000000777777777777777000003333333333333333333355555555557777777777777777777777777777777777777777777770000000000.0000000000777777777777777000003333333333333333333355555555557777777777777777777777777777777777777777777770000000000.0000000000777777777777777777772222222222333333333355555333335555555555777777777777777777777777777777222220000000000.0000000000777777777777777777772222222222333333333355555333335555555555777777777777777777777777777777222220000000000.0000000000777777777777777777772222222222333333333355555333335555555555777777777777777777777777777777222220000000000.0000000000777777777777777777772222222222333333333355555333335555555555777777777777777777777777777777222220000000000.0000000000777777777777777777772222222222333333333355555333335555555555777777777777777777777777777777222220000000000.0000000000111112222222222222222222266666333333333333333333333333333333555550000000000000000000000000777770000000000.0000000000111112222222222222222222266666333333333333333333333333333333555550000000000000000000000000777770000000000.0000000000111112222222222222222222266666333333333333333333333333333333555550000000000000000000000000777770000000000.0000000000111112222222222222222222266666333333333333333333333333333333555550000000000000000000000000777770000000000.0000000000111112222222222222222222266666333333333333333333333333333333555550000000000000000000000000777770000000000.0000000000777771111111111222222222233333333333333311111333333333333333333335555555555555557777777777111110000000000.0000000000777771111111111222222222233333333333333311111333333333333333333335555555555555557777777777111110000000000.0000000000777771111111111222222222233333333333333311111333333333333333333335555555555555557777777777111110000000000.0000000000777771111111111222222222233333333333333311111333333333333333333335555555555555557777777777111110000000000.0000000000777771111111111222222222233333333333333311111333333333333333333335555555555555557777777777111110000000000.0000000000777777777777777111112222222222333331111122222222223333333333333333333344444444441111111111777770000000000.0000000000777777777777777111112222222222333331111122222222223333333333333333333344444444441111111111777770000000000.0000000000777777777777777111112222222222333331111122222222223333333333333333333344444444441111111111777770000000000.0000000000777777777777777111112222222222333331111122222222223333333333333333333344444444441111111111777770000000000.0000000000777777777777777111112222222222333331111122222222223333333333333333333344444444441111111111777770000000000.0000000000777777777777777777777777711111222222222222222222222222222222222223333311111111111111155555777770000000000.0000000000777777777777777777777777711111222222222222222222222222222222222223333311111111111111155555777770000000000.0000000000777777777777777777777777711111222222222222222222222222222222222223333311111111111111155555777770000000000.0000000000777777777777777777777777711111222222222222222222222222222222222223333311111111111111155555777770000000000.0000000000777777777777777777777777711111222222222222222222222222222222222223333311111111111111155555777770000000000.0000000000777777777777777777777777777777111112222222222222222222222222111111111122222222224444444444222220000000000.0000000000777777777777777777777777777777111112222222222222222222222222111111111122222222224444444444222220000000000.0000000000777777777777777777777777777777111112222222222222222222222222111111111122222222224444444444222220000000000.0000000000777777777777777777777777777777111112222222222222222222222222111111111122222222224444444444222220000000000.0000000000777777777777777777777777777777111112222222222222222222222222111111111122222222224444444444222220000000000.0000000000777777777777777777777777777777777771111122222222222222211111222222222222222000000000000000222220000000000.0000000000777777777777777777777777777777777771111122222222222222211111222222222222222000000000000000222220000000000.0000000000777777777777777777777777777777777771111122222222222222211111222222222222222000000000000000222220000000000.0000000000777777777777777777777777777777777771111122222222222222211111222222222222222000000000000000222220000000000.0000000000777777777777777777777777777777777771111122222222222222211111222222222222222000000000000000222220000000000.0000000000777777777777777777777777777777777777777711111111112222222222222222222200000222222222222222000000000000000.0000000000777777777777777777777777777777777777777711111111112222222222222222222200000222222222222222000000000000000.0000000000777777777777777777777777777777777777777711111111112222222222222222222200000222222222222222000000000000000.0000000000777777777777777777777777777777777777777711111111112222222222222222222200000222222222222222000000000000000.0000000000777777777777777777777777777777777777777711111111112222222222222222222200000222222222222222000000000000000.0000000000777777777777777777777777777777777777777777777777771111122222222221111122222222222222222222222220000000000.0000000000777777777777777777777777777777777777777777777777771111122222222221111122222222222222222222222220000000000.0000000000777777777777777777777777777777777777777777777777771111122222222221111122222222222222222222222220000000000.0000000000777777777777777777777777777777777777777777777777771111122222222221111122222222222222222222222220000000000.0000000000777777777777777777777777777777777777777777777777771111122222222221111122222222222222222222222220000000000.0000000000777777777777777777777777777777777777777777777777777777711111222222222222222222222222222222222220000000000.0000000000777777777777777777777777777777777777777777777777777777711111222222222222222222222222222222222220000000000.0000000000777777777777777777777777777777777777777777777777777777711111222222222222222222222222222222222220000000000.0000000000777777777777777777777777777777777777777777777777777777711111222222222222222222222222222222222220000000000.0000000000777777777777777777777777777777777777777777777777777777711111222222222222222222222222222222222220000000000.0000000000777777777777777777777777777777777777777777777777777777777777777771111122222222222222222222222220000000000.0000000000777777777777777777777777777777777777777777777777777777777777777771111122222222222222222222222220000000000.0000000000777777777777777777777777777777777777777777777777777777777777777771111122222222222222222222222220000000000.0000000000777777777777777777777777777777777777777777777777777777777777777771111122222222222222222222222220000000000.0000000000777777777777777777777777777777777777777777777777777777777777777771111122222222222222222222222220000000000.0000000000777777777777777777777777777777777777777777777777777777777777777777777777777111111111111111222220000000000.0000000000777777777777777777777777777777777777777777777777777777777777777777777777777111111111111111222220000000000.0000000000777777777777777777777777777777777777777777777777777777777777777777777777777111111111111111222220000000000.0000000000777777777777777777777777777777777777777777777777777777777777777777777777777111111111111111222220000000000.0000000000777777777777777777777777777777777777777777777777777777777777777777777777777111111111111111222220000000000.0000000000777777777777777777777777777777777777777777777777777777777777777777777777777777777777711111222220000000000.0000000000777777777777777777777777777777777777777777777777777777777777777777777777777777777777711111222220000000000.0000000000777777777777777777777777777777777777777777777777777777777777777777777777777777777777711111222220000000000.0000000000777777777777777777777777777777777777777777777777777777777777777777777777777777777777711111222220000000000.0000000000777777777777777777777777777777777777777777777777777777777777777777777777777777777777711111222220000000000.0000000000777777777777777777777777777777777777777777777777777777777777777777777777777777771111122222000000000000000.0000000000777777777777777777777777777777777777777777777777777777777777777777777777777777771111122222000000000000000.0000000000777777777777777777777777777777777777777777777777777777777777777777777777777777771111122222000000000000000.0000000000777777777777777777777777777777777777777777777777777777777777777777777777777777771111122222000000000000000.0000000000777777777777777777777777777777777777777777777777777777777777777777777777777777771111122222000000000000000.0000000000777777777777777777777777777777777777777777777777777777777777777777777777777111112222233333444440000000000.0000000000777777777777777777777777777777777777777777777777777777777777777777777777777111112222233333444440000000000.0000000000777777777777777777777777777777777777777777777777777777777777777777777777777111112222233333444440000000000.0000000000777777777777777777777777777777777777777777777777777777777777777777777777777111112222233333444440000000000.0000000000777777777777777777777777777777777777777777777777777777777777777777777777777111112222233333444440000000000.0000000000777777777777777777777777777777777777777777777777777777777777777771111111111222223333344444777770000000000.0000000000777777777777777777777777777777777777777777777777777777777777777771111111111222223333344444777770000000000.0000000000777777777777777777777777777777777777777777777777777777777777777771111111111222223333344444777770000000000.0000000000777777777777777777777777777777777777777777777777777777777777777771111111111222223333344444777770000000000.0000000000777777777777777777777777777777777777777777777777777777777777777771111111111222223333344444777770000000000","777777777777777777777777700000000000000011111777777777777777777777777777777777777777777777.777777777777777777777777700000000000000011111777777777777777777777777777777777777777777777.777777777777777777777777700000000000000011111777777777777777777777777777777777777777777777.777777777777777777777777700000000000000011111777777777777777777777777777777777777777777777.777777777777777777777777700000000000000011111777777777777777777777777777777777777777777777.777777777777777777777777777777222222222222222111117777777777777777777700000000000000000000.777777777777777777777777777777222222222222222111117777777777777777777700000000000000000000.777777777777777777777777777777222222222222222111117777777777777777777700000000000000000000.777777777777777777777777777777222222222222222111117777777777777777777700000000000000000000.777777777777777777777777777777222222222222222111117777777777777777777700000000000000000000.777777777777777777777777777777777772222222222000000000000000000000000022222222227777777777.777777777777777777777777777777777772222222222000000000000000000000000022222222227777777777.777777777777777777777777777777777772222222222000000000000000000000000022222222227777777777.777777777777777777777777777777777772222222222000000000000000000000000022222222227777777777.777777777777777777777777777777777772222222222000000000000000000000000022222222227777777777.777777777777777777777777777777777777777700000222222222222222222222222222222222227777777777.777777777777777777777777777777777777777700000222222222222222222222222222222222227777777777.777777777777777777777777777777777777777700000222222222222222222222222222222222227777777777.777777777777777777777777777777777777777700000222222222222222222222222222222222227777777777.777777777777777777777777777777777777777700000222222222222222222222222222222222227777777777.777777777777777777777777777777777777777722222222222222222222222222222222222222221111111111.777777777777777777777777777777777777777722222222222222222222222222222222222222221111111111.777777777777777777777777777777777777777722222222222222222222222222222222222222221111111111.777777777777777777777777777777777777777722222222222222222222222222222222222222221111111111.777777777777777777777777777777777777777722222222222222222222222222222222222222221111111111.777777777777777777777777777777777777777722222222222222222222222220000011111111117777777777.777777777777777777777777777777777777777722222222222222222222222220000011111111117777777777.777777777777777777777777777777777777777722222222222222222222222220000011111111117777777777.777777777777777777777777777777777777777722222222222222222222222220000011111111117777777777.777777777777777777777777777777777777777722222222222222222222222220000011111111117777777777.777777777777777777777777777777777777777722222222222222222222222220000011111111117777777777.777777777777777777777777777777777777777722222222222222222222222220000011111111117777777777.777777777777777777777777777777777777777722222222222222222222222220000011111111117777777777.777777777777777777777777777777777777777722222222222222222222222220000011111111117777777777.777777777777777777777777777777777777777722222222222222222222222220000011111111117777777777.777777777777777777777777700000000001111122222222222222222222222220000077777777777777777777.777777777777777777777777700000000001111122222222222222222222222220000077777777777777777777.777777777777777777777777700000000001111122222222222222222222222220000077777777777777777777.777777777777777777777777700000000001111122222222222222222222222220000077777777777777777777.777777777777777777777777700000000001111122222222222222222222222220000077777777777777777777.777777777777777000000000022222222222222211111222222222222222222220000077777777777777777777.777777777777777000000000022222222222222211111222222222222222222220000077777777777777777777.777777777777777000000000022222222222222211111222222222222222222220000077777777777777777777.777777777777777000000000022222222222222211111222222222222222222220000077777777777777777777.777777777777777000000000022222222222222211111222222222222222222220000077777777777777777777.777770000000000222222222222222222222222222222222222222222222222222222200000777777777777777.777770000000000222222222222222222222222222222222222222222222222222222200000777777777777777.777770000000000222222222222222222222222222222222222222222222222222222200000777777777777777.777770000000000222222222222222222222222222222222222222222222222222222200000777777777777777.777770000000000222222222222222222222222222222222222222222222222222222200000777777777777777.000001111111111222222222222222222225555555555222222222222222222222222222222000007777777777.000001111111111222222222222222222225555555555222222222222222222222222222222000007777777777.000001111111111222222222222222222225555555555222222222222222222222222222222000007777777777.000001111111111222222222222222222225555555555222222222222222222222222222222000007777777777.000001111111111222222222222222222225555555555222222222222222222222222222222000007777777777.777777777722222222226666622222666665555555555555555555555555222222222222222222222222222222.777777777722222222226666622222666665555555555555555555555555222222222222222222222222222222.777777777722222222226666622222666665555555555555555555555555222222222222222222222222222222.777777777722222222226666622222666665555555555555555555555555222222222222222222222222222222.777777777722222222226666622222666665555555555555555555555555222222222222222222222222222222.777777777722222222222222222222555556666655555555555555555555555552222211111777777777777777.777777777722222222222222222222555556666655555555555555555555555552222211111777777777777777.777777777722222222222222222222555556666655555555555555555555555552222211111777777777777777.777777777722222222222222222222555556666655555555555555555555555552222211111777777777777777.777777777722222222222222222222555556666655555555555555555555555552222211111777777777777777.777777777722222222222222255555555556666655555555555555555555555555555511111777777777777777.777777777722222222222222255555555556666655555555555555555555555555555511111777777777777777.777777777722222222222222255555555556666655555555555555555555555555555511111777777777777777.777777777722222222222222255555555556666655555555555555555555555555555511111777777777777777.777777777722222222222222255555555556666655555555555555555555555555555511111777777777777777.777770000022222222222222233333555556666655555555555555555555555550000022222000000000000000.777770000022222222222222233333555556666655555555555555555555555550000022222000000000000000.777770000022222222222222233333555556666655555555555555555555555550000022222000000000000000.777770000022222222222222233333555556666655555555555555555555555550000022222000000000000000.777770000022222222222222233333555556666655555555555555555555555550000022222000000000000000.000001111111111222226666633333333335555555555444444444444444000002222222222222227777777777.000001111111111222226666633333333335555555555444444444444444000002222222222222227777777777.000001111111111222226666633333333335555555555444444444444444000002222222222222227777777777.000001111111111222226666633333333335555555555444444444444444000002222222222222227777777777.000001111111111222226666633333333335555555555444444444444444000002222222222222227777777777.777777777777777222222222233333444446666644444777777777777777777777777777777777777777777777.777777777777777222222222233333444446666644444777777777777777777777777777777777777777777777.777777777777777222222222233333444446666644444777777777777777777777777777777777777777777777.777777777777777222222222233333444446666644444777777777777777777777777777777777777777777777.777777777777777222222222233333444446666644444777777777777777777777777777777777777777777777.777777777777777777777777722222222222222277777777777777777777777777777777777777777777777777.777777777777777777777777722222222222222277777777777777777777777777777777777777777777777777.777777777777777777777777722222222222222277777777777777777777777777777777777777777777777777.777777777777777777777777722222222222222277777777777777777777777777777777777777777777777777.777777777777777777777777722222222222222277777777777777777777777777777777777777777777777777"];

function RGBToHSL(r, g, b) {
  if (Array.isArray(r)) {
    g = r[1];
    b = r[2];
    r = r[0];
  }
  r = r / 255;
  g = g / 255;
  b = b / 255;
  const cMax = Math.max(r, g, b);
  const cMin = Math.min(r, g, b);
  const delta = cMax - cMin;
  let h;
  if (delta === 0) {
    h = 0;
  } else if (cMax === r) {
    h = 60 * (((g - b) / delta) % 6);
  } else if (cMax === g) {
    h = 60 * ((b - r) / delta + 2);
  } else if (cMax === b) {
    h = 60 * ((r - g) / delta + 4);
  }
  if (h < 0) {
    h += 360;
  }
  const l = (cMax + cMin) / 2;

  let s;
  if (delta === 0) {
    s = 0;
  } else {
    s = delta / (1 - Math.abs(2 * l - 1));
  }

  return [h, s, l];
}

function HSLToRGB(h, s, l) {
  if (Array.isArray(h)) {
    s = h[1];
    l = h[2];
    h = h[0];
  }
  const c = (1 - Math.abs(2 * l - 1)) * s;
  const x = c * (1 - Math.abs((h / 60) % 2 - 1));
  const m = l - c / 2;
  let r, g, b;
  if (h >= 0 && h < 60) {
    r = c;
    g = x;
    b = 0;
  } else if (h >= 60 && h < 120) {
    r = x;
    g = c;
    b = 0;
  } else if (h >= 120 && h < 180) {
    r = 0;
    g = c;
    b = x;
  } else if (h >= 180 && h < 240) {
    r = 0;
    g = x;
    b = c;
  } else if (h >= 240 && h < 300) {
    r = x;
    g = 0;
    b = c;
  } else if (h >= 300 && h < 360) {
    r = c;
    g = 0;
    b = x;
  }
  r = Math.round((r + m) * 255);
  g = Math.round((g + m) * 255);
  b = Math.round((b + m) * 255);
  return [r, g, b];
}

function RGBToHex(arr) {
  const r = arr[0],
    g = arr[1],
    b = arr[2];
  return "#" + ("0" + r.toString(16)).slice(-2) + ("0" + g.toString(16)).slice(-2) + ("0" + b.toString(16)).slice(-2);
}

function derivePalette(r, g, b, invert) {
  const hsl = RGBToHSL(r, g, b);

  const h = hsl[0];
  const hx = h % 360;
  const hy = (h + 320) % 360;

  const c1 = HSLToRGB(hx, 1, 0.1);
  let c2, c3, c4, c5;
  if (invert) {
    c4 = HSLToRGB(hx, 1, 0.2);
    c5 = HSLToRGB(hx, 1, 0.45);
    c2 = HSLToRGB(hx, 1, 0.7);
    c3 = HSLToRGB(hy, 1, 0.8);
  } else {
    c2 = HSLToRGB(hx, 1, 0.2);
    c3 = HSLToRGB(hx, 1, 0.45);
    c4 = HSLToRGB(hx, 1, 0.7);
    c5 = HSLToRGB(hy, 1, 0.8);
  }

  return [
    null,
    RGBToHex(c1),
    RGBToHex(c2),
    RGBToHex(c3),
    RGBToHex(c4),
    RGBToHex(c5)
  ];
}

function hexToBytes(hex) {
  const result = [];
  for (let i = 0; i < hex.length; i += 2) {
    result.push(parseInt(hex.slice(i, i + 2), 16));
  }
  return result;
}

const doggyidparser = function(doggyId) {
  if (doggyId.slice(0, 2) === "0x") {
    doggyId = doggyId.slice(2);
  }
  const bytes = hexToBytes(doggyId);
  const genesis = bytes[0],
    k = bytes[1],
    r = bytes[2],
    g = bytes[3],
    b = bytes[4];

  const invert = k >= designs.length;
  const designIndex = k % designs.length;
  const design = designs[designIndex].split(".");
  let colors;
  if (genesis) {
    if (designIndex % 2 === 0 && invert || designIndex % 2 === 1 && !invert) {
      colors = [null, "#555555", "#d3d3d3", "#ffffff", "#aaaaaa", "#ff9999"];
    } else {
      colors = [null, "#555555", "#222222", "#111111", "#bbbbbb", "#ff9999"];
    }
  } else {
    colors = derivePalette(r, g, b, invert);
  }

  return design.map(function(row) {
    return row.split("").map(function(cell) {
      return colors[cell];
    });
  });
};

export default doggyidparser;
